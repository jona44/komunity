<ul class="space-y-3" id="contributions-list">
    {% if show_detail_toggle %}
    <div class="flex justify-end mb-4">
        <button class="text-sm font-bold text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 px-4 py-2 rounded-full transition-colors duration-200 flex items-center gap-2 shadow-sm"
                hx-get="{% url 'filter_contributions' deceased_id %}?mode=detailed"
                hx-target="#contributions-list-container">
            <span>View Member Status</span>
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
        </button>
    </div>
    {% endif %}
    {% for contribution in contributions %}
    <li class="p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-blue-300 hover:shadow-md transition-all duration-200">
        <div class="flex items-start gap-3">
            <!-- Avatar -->
            
            
            <!-- Content -->
            <div class="flex-1 min-w-0">
                <div class="flex items-start justify-between gap-2 mb-1">
                    <a href="{% url 'contribution_detail' contribution.id %}" 
                       class="group font-semibold text-gray-900 hover:text-blue-600 transition-colors duration-200 flex items-center gap-1"
                       hx-get="{% url 'contribution_detail' contribution.id %}"
                       hx-target="#contribution_detail_modal"
                       onclick="contribution_detail_modal.showModal(); event.preventDefault()">
                        {{ contribution.contributing_member }}
                        <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </a>
                    <span class="text-xs text-gray-500 whitespace-nowrap">{{ contribution.contribution_date }}</span>
                </div>
            </div>
        </div>
    </li>
    {% empty %}
    <li class="p-8 text-center text-gray-500 bg-gray-50 rounded-lg border border-gray-200 border-dashed">
        <p>No contributions found.</p>
    </li>
    {% endfor %}
</ul>

{% if request.headers.HX_Request %}
<span id="contribution-total-count" hx-swap-oob="true" class="px-3 py-1 bg-white text-blue-600 rounded-full text-sm font-semibold">{{ contributions.count }}</span>

<div id="contribution-summary-card" hx-swap-oob="true" class="bg-white rounded-xl shadow-sm border border-gray-200 p-5 transform transition-all hover:scale-[1.02]">
    <div class="flex flex-col">
        <span class="text-gray-500 text-xs font-bold uppercase tracking-wider mb-1" id="summary-label">
            {% if is_search %}
                Search Results Total
            {% elif deceased_id and deceased_id != 'all' %}
                Total for Selected
            {% else %}
                Total Contributions
            {% endif %}
        </span>
        <div class="flex items-baseline gap-1">
            <span class="text-3xl font-bold tracking-tight text-gray-900" id="summary-amount">R {{ total_amount|default:"0.00" }}</span>
            <span class="text-gray-400 text-xs font-medium">raised</span>
        </div>
        <div class="mt-4 w-full bg-gray-100 rounded-full h-1.5 overflow-hidden">
            <div class="bg-blue-500 h-1.5 rounded-full w-full opacity-80"></div>
        </div>
    </div>
</div>
{% endif %}
